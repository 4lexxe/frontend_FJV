<div class="signup-container">
  <div class="auth-card">
    <!-- Logo y encabezado -->
    <div class="auth-header text-center mb-4">
      <div class="logo-container mb-3">
        <img src="images/FJV_LOGO.png" alt="FJV Logo" class="auth-logo">
      </div>
      <h2 class="auth-title">Crear Cuenta</h2>
      <p class="auth-subtitle">Únete a la comunidad de la Federación Jujeña de Voleibol</p>
    </div>

    <!-- Formulario de registro -->
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="auth-form" novalidate>
      <!-- Nombre completo -->
      <div class="mb-3">
        <label for="name" class="form-label">Nombre completo</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-user"></i></span>
          <input
            type="text"
            formControlName="name"
            class="form-control"
            id="name"
            placeholder="Tu nombre completo"
            [class.is-invalid]="nameControl?.invalid && nameControl?.touched"
          >
        </div>
        @if (nameControl?.invalid && nameControl?.touched) {
          <div class="invalid-feedback d-block">
            @if (nameControl?.errors?.['required']) {
              <span>El nombre es obligatorio</span>
            } @else if (nameControl?.errors?.['minlength']) {
              <span>El nombre debe tener al menos 3 caracteres</span>
            }
          </div>
        }
      </div>

      <!-- Correo electrónico -->
      <div class="mb-3">
        <label for="email" class="form-label">Correo electrónico</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-envelope"></i></span>
          <input
            type="email"
            formControlName="email"
            class="form-control"
            id="email"
            placeholder="usuario@ejemplo.com"
            [class.is-invalid]="emailControl?.invalid && emailControl?.touched"
          >
        </div>
        @if (emailControl?.invalid && emailControl?.touched) {
          <div class="invalid-feedback d-block">
            @if (emailControl?.errors?.['required']) {
              <span>El correo es obligatorio</span>
            } @else if (emailControl?.errors?.['email']) {
              <span>Ingrese un correo válido</span>
            }
          </div>
        }
      </div>

      <!-- Contraseña -->
      <div class="mb-3">
        <label for="password" class="form-label">Contraseña</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock"></i></span>
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            class="form-control"
            id="password"
            placeholder="Crea tu contraseña"
            [class.is-invalid]="passwordControl?.invalid && passwordControl?.touched"
          >
          <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordVisibility('password')">
            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>
        @if (passwordControl?.invalid && passwordControl?.touched) {
          <div class="invalid-feedback d-block">
            @if (passwordControl?.errors?.['required']) {
              <span>La contraseña es obligatoria</span>
            } @else if (passwordControl?.errors?.['minlength']) {
              <span>La contraseña debe tener al menos 6 caracteres</span>
            }
          </div>
        }
      </div>

      <!-- Confirmar Contraseña -->
      <div class="mb-3">
        <label for="confirmPassword" class="form-label">Confirmar contraseña</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock"></i></span>
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
            class="form-control"
            id="confirmPassword"
            placeholder="Repite tu contraseña"
            [class.is-invalid]="(confirmPasswordControl?.invalid || !passwordsMatch) && confirmPasswordControl?.touched"
          >
          <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordVisibility('confirmPassword')">
            <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>
        @if (confirmPasswordControl?.touched) {
          @if (confirmPasswordControl?.errors?.['required']) {
            <div class="invalid-feedback d-block">
              <span>Debes confirmar tu contraseña</span>
            </div>
          } @else if (!passwordsMatch) {
            <div class="invalid-feedback d-block">
              <span>Las contraseñas no coinciden</span>
            </div>
          }
        }
      </div>

      <!-- Términos y condiciones -->
      <div class="mb-4 form-check">
        <input
          type="checkbox"
          class="form-check-input"
          id="terms"
          formControlName="termsAccepted"
          [class.is-invalid]="termsControl?.invalid && termsControl?.touched"
        >
        <label class="form-check-label" for="terms">
          Acepto los <a href="#" class="auth-link">Términos de servicio</a> y <a href="#" class="auth-link">Política de privacidad</a>
        </label>
        @if (termsControl?.invalid && termsControl?.touched) {
          <div class="invalid-feedback d-block">
            <span>Debes aceptar los términos y condiciones</span>
          </div>
        }
      </div>

      <!-- Error message -->
      @if (errorMessage) {
        <div class="alert alert-danger mb-3" role="alert">
          {{ errorMessage }}
        </div>
      }

      <!-- Submit button -->
      <button
        type="submit"
        class="btn btn-primary w-100"
        [disabled]="isSubmitting || signupForm.invalid">
        @if (isSubmitting) {
          <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          Registrando...
        } @else {
          Crear cuenta
        }
      </button>

      <!-- Opciones alternativas de registro -->
      <div class="separator my-4">
        <span>O regístrate con</span>
      </div>

      <div class="social-logins mb-4">
        <button type="button" class="btn btn-outline-secondary social-btn">
          <i class="fab fa-google"></i>
        </button>
        <button type="button" class="btn btn-outline-secondary social-btn">
          <i class="fab fa-facebook-f"></i>
        </button>
        <button type="button" class="btn btn-outline-secondary social-btn">
          <i class="fab fa-linkedin-in"></i>
        </button>
      </div>

      <!-- Link a login -->
      <div class="text-center mt-3">
        <p>¿Ya tienes una cuenta? <a routerLink="/auth/login" class="auth-link">Inicia sesión</a></p>
      </div>
    </form>
  </div>
</div>
