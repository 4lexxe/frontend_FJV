<div class="table-responsive">
  <table class="table table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th>Afiliado</th>
        <th>DNI</th>
        <th>Tipo</th>
        <th>Club</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let afiliado of afiliados">
        <td>
          <div class="d-flex align-items-center">
            <div class="me-3">
              <!-- Mostrar foto o icono -->
              <div *ngIf="getAvatarUrl(afiliado); else avatarIcon" class="avatar-container">
                <img [src]="getAvatarUrl(afiliado)"
                     class="rounded border"
                     width="40"
                     height="40"
                     style="object-fit: cover;"
                     [alt]="afiliado.apellidoNombre">
              </div>

              <!-- Template para icono por defecto - SIN fondo -->
              <ng-template #avatarIcon>
                <div class="avatar-icon-simple d-flex align-items-center justify-content-center"
                     style="width: 40px; height: 40px;">
                  <i [class]="getAvatarIcon(afiliado).icon"
                     [style.color]="getAvatarIcon(afiliado).color"
                     style="font-size: 1.5rem;"></i>
                </div>
              </ng-template>
            </div>
            <div>
              <div class="fw-bold">{{ afiliado.apellidoNombre }}</div>
              <small class="text-muted">{{ afiliado.numeroAfiliacion }}</small>
            </div>
          </div>
        </td>
        <td>{{ afiliado.dni }}</td>
        <td>
          <span class="badge bg-info">{{ afiliado.tipo }}</span>
        </td>
        <td>{{ afiliado.club || 'Sin club' }}</td>
        <td>
          <span class="badge bg-success">Activo</span>
        </td>
        <td>
          <div class="btn-group btn-group-sm">
            <button class="btn btn-outline-primary" (click)="onEditar(afiliado)" title="Editar">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-outline-danger" (click)="onEliminar(afiliado)" title="Eliminar">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div *ngIf="afiliados.length === 0" class="alert alert-info">
  No hay afiliados para mostrar.
</div>

<div *ngIf="afiliadoAEliminar" class="modal fade show d-block" tabindex="-1" style="background: rgba(0,0,0,0.6)">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-body text-center">
        <p>¿Eliminar a <strong>{{ afiliadoAEliminar.apellidoNombre }}</strong>?</p>
        <button class="btn btn-danger me-2" (click)="confirmarEliminacion()">Sí</button>
        <button class="btn btn-secondary" (click)="cancelarEliminacion()">No</button>
      </div>
    </div>
  </div>
</div>
